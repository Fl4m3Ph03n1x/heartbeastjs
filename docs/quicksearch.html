<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"modules.list.html":{"id":"modules.list.html","title":"Modules","body":" Documentation Modules heartBeat Modules × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-06-16T14:49:42+00:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Modules heartBeat Whatheartbeatjs is a small light weight library that helps you run periodic heartbeat functions and detects timeouts when they occur by launching events. It was mainly designed for tcp/ip connections, but you can use it with any protocol you want as it designed to be generic. WhyWhen you are connected to a third party mahcine (aka target), most of the time you need to know if the target is alive or not. To do this, there are two common scenarios: the target notifies you when it is about to go down you poll the target to check its status In cases where the first scenario doesn't happen or it is incomplete, you need to resort to polling to check on it. heartbeatjs was desgined for this purpose and its function is to help you poll targets. HowFollowing are instructions on how to intsall and use heartbeatjs. For more information about the project you can check the GitHub page: heartbeastjs Github And for questions you can ask in the issues page: heartbeastjs Issues For additional information on the API, feel free to check the heartbeastjs API module. Install`npm install heartbeatjs` --saveExamplesStart a heartbeat that sends a message periodically to a target, with DEFAULT.TIMEOUT 5s and DEFAULT.INTERVAL 3s: const net = require('net'); const heartbeatFactory = require(&quot;heartbeatjs&quot;); const myHeartBeat = heartbeatFactory(); const client = net.createConnection({ port: 8124 }, () =&gt; { //'connect' listener console.log('connected to target!'); myHeartBeat.start(() =&gt; { client.write(&quot;Hello World!&quot;); }); });Now let's say that everytime we get a message, we consider it a pong: client.on(&quot;data&quot;, data =&gt; { myHeartBeat.receivedPong(); //timeout timer resetted! });Heartbeat with custom Pings and Pongs: const client = net.createConnection({ port: 8124 }, () =&gt; { //'connect' listener console.log('connected to target!'); myHeartBeat.setPing(&quot;Marco&quot;); myHeartBeat.setPong(&quot;Polo&quot;); myHeartBeat.start(() =&gt; { //send ping every 3s client.write(myHeartBeat.getPing()); }); }); client.on(&quot;data&quot;, data =&gt; { if(data === myHeartBeat.getPong()){ myHeartBeat.receivedPong(); return; } //process data });Listen to when target dies via timeout: const client = net.createConnection({ port: 8124 }, () =&gt; { //'connect' listener console.log('connected to target!'); myHeartBeat.onTimeout(() =&gt; console.log(&quot;Timed Out!&quot;)); myHeartBeat.start(() =&gt; { //send ping every 3s client.write(&quot;Hello World&quot;); }); }); × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-06-16T14:49:42+00:00 using the DocStrap template. "},"module-heartBeat.html":{"id":"module-heartBeat.html","title":"Module: heartBeat","body":" Documentation Modules heartBeat Module: heartBeat Runs a given function periodically and watches for timeouts. Version: 1.0.1 Author: Pedro Miguel P. S. Martins Methods &lt;inner&gt; getBeatInterval() Returns the current hearbeat interval. The heartbeat interval is the interval at which the heartbeat will run the ping function. Returns: The current heartbeat interval. Type Number &lt;inner&gt; getBeatTimeout() Returns the current hearbeat timeout. The heartbeat timeout is the amount of time that must pass for the hasTimedOut to return true. See: hasTimedOut Returns: The current timeout. Type Number &lt;inner&gt; getPing() Returns the ping object being used. Returns: The current object being used as a ping. Type Object &lt;inner&gt; getPong() Returns the pong object being used. Returns: The current object being used as a pong. Type Object &lt;inner&gt; hasTimedOut() Used to detected if a heartbeat has timedout. A heartbeat times out when it sends a ping, and receives no pong after a given period of time. The timeout period can be manipulated via setBeatTimeout. See: setBeatTimeout Returns: true if the heartbeat has timedout, false otherwise. Type Boolean &lt;inner&gt; isBeating() Returns true if the heartbeat is active, false otherwise. A heartbeat is considered active if it was started and has not beend stopped yet. Returns: true if the heartbeat is active, false otherwise. Type Boolean &lt;inner&gt; onTimeout(fn) Runs the given function when the heartbeat detects a timeout. A timeout is deteceted if receivedPong is not called within the defined 'timeout' period. Parameters: Name Type Description fn function The function to be executed when a timeout occurs. &lt;inner&gt; receivedPong() Notifies the hearbeat that it has received a pong from the target. &lt;inner&gt; reset() Stops the heartbeat if it is beating, and resets all properties to the original default values. &lt;inner&gt; setBeatInterval(newInterval) Sets the current heartbeat interval to the given one. Note that setting the heartbeat interval will not affetct current heartbeat running. You must stop them and then start them for the new interval to be applied. Parameters: Name Type Description newInterval Number The new heartbeat interval. See: stop start &lt;inner&gt; setBeatTimeout(newTimeout) Sets the current timeout to the given one. Setting the timeout this way will immediatly affect the hasTimedOut method without the need to restart the heartbeat object. Invoking this method does restart the timer controlling the onTimeout event. Parameters: Name Type Description newTimeout Number The new newTimeout. See: hasTimedOut onTimeout &lt;inner&gt; setPing(newPing) Sets the current ping object. A ping object can be anything that the receiver accepts, from a Buffer of bytes to plain Object to a primitive. Parameters: Name Type Description newPing Object The new ping object. &lt;inner&gt; setPong(newPong) Sets the pong object we expect to receive from the target of the heartbeats. This is only needed if there is a need to distinguish between normal messages from the target of heartbeat and pong messages that need to be processed differently. Parameters: Name Type Description newPong Object The new pong object. &lt;inner&gt; start(fn) Starts the heartbeat object, executing the given function fn every interval. If you want to send a ping to an object every interval, this is where you defined that. Parameters: Name Type Description fn function The function that will be executed periodically by the heartbeat object. &lt;inner&gt; stop() Stops the heartbeat object and clears all internal states. × Search results Close Documentation generated by JSDoc 3.4.3 on 2017-06-16T14:49:42+00:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
